<!DOCTYPE html>
<html>
<head>
<title>(As)3B(sA)3t</title>
<meta charset="UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<style>
* { font-family: sans-serif; }
svg { border:1px solid gray; }
.c > text { dominant-baseline: central; text-anchor:end; font-size:10px; font-family: monospace; }
line.c  { stroke-width:0.5; }
text.c1, circle.c1 { fill:#800; font-size:12px; }
text.c2, circle.c2 { fill:#f00; font-size:11px; }
text.c3, circle.c3 { fill:#f80; font-size:10px; }
line.c1 { stroke:#800; }
line.c2 { stroke:#f00; }
line.c3 { stroke:#f80; }
</style>
</head>

<body>
<h1>(As)<sub>3</sub>B(sA)<sub>3</sub>t</h1>
<div id="svg1"></div>
</body>
<script>
const C = []
for (let i=0; i <= 60; i++) {
	if (i % 6 == 0) { C.push({ c:1, r: { p:i/6, q:10-i/6 }}) } else 
	if (i % 3 == 0) { C.push({ c:2, r: { p:i/3, q:20-i/3 }}) } else
	if (i <= 30) 	{ C.push({ c:3, r: { p:i,   q:30-i   }}) }
}
const sC = C
	.sort((a,b)=> { return a.r.p/a.r.q - b.r.p/b.r.q })
	.map(c => {
		const i = c.r.p / c.r.q
		const A = 5*Math.PI / (i + 6)
		const x1 = Math.cos(1*A)
		const x2 = Math.cos(2*A - 1*Math.PI)
		const x3 = Math.cos(3*A)
		return {
			c: c.c,
			r: c.r,
			A: A,
			t: 2*(x1+x2+x3)
		}
	})
//sC.forEach(c => { console.log(JSON.stringify(c))})

const r = []
const xml = (e, attrs, end, text)=> {
	const cols = []
	cols.push(e)
	if (attrs)
		Object.keys(attrs).forEach(k => { cols.push(`${k}="${attrs[k]}"`) })
	const tail = (!end) ? ">" : (!text) ? "/>" : `>${text}</${e}>`
	r.push(`<${cols.join(" ")}${tail}`)
}

const M = 10
const W = 600
const T = 50
const H = 600

xml("svg", { width:2*M+W, height:2*M+T+H, xmlns:"http://www.w3.org/2000/svg"})
r.push(`<g class="c" transform="translate(0.5, 0.5)">`)
sC.forEach(c => {
	let x1 = M, x2 = 100+M
	switch (c.c) {
		case 1: x1 += 20; break;
		case 2: x1 += 30; break;
		case 3: x1 += 65; break;
	}
	const y = M + T + H*(c.r.p/(c.r.p + c.r.q))
	const cx = W - (3-c.t)*80//; console.log("cx", c.t)
	xml("circle", { "class":`c${c.c}`, cx:cx, cy:y, r:3 }, true)

	xml("text", { "class":`c c${c.c}`, x:x1, y:y }, true, `${c.r.p}/${c.r.q}`)
	xml("line", { "class":`c c${c.c}`, x1:x1+3, y1:y, x2:cx, y2:y }, true)
})
r.push("</g>")
xml("/svg")
document.getElementById("svg1").innerHTML = r.join("\n")
</script>
</html>